/* FILE: app/ui/program-health/styles.css */

.ph-root{
  width: 100%;
  max-width: none;
  margin: 0 auto;
  padding: 18px 18px 28px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.ph-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}

.ph-title { font-size: 18px; font-weight: 600; }
.ph-controls { display: flex; gap: 8px; }
.ph-btn { padding: 8px 10px; border: 1px solid rgba(0,0,0,0.15); border-radius: 10px; background: rgba(255,255,255,0.7); }

.ph-body{
  display:grid;
  grid-template-columns: minmax(680px, 1fr) 420px;
  gap: 18px;
  align-items: start;

  /* Critical: occupy the viewport so the “instrument” has gravity */
  min-height: calc(100vh - 210px);
}
@media (max-width: 1100px){
  .ph-body{
    grid-template-columns: 1fr;
    min-height: unset;
  }
}

.ph-main{
  min-width: 0;
  display:flex;
  flex-direction: column;
  gap: 14px;
  /* Make the main column capable of holding a tall instrument */
  min-height: calc(100vh - 210px);
}
@media (max-width: 1100px){
  .ph-main{ min-height: unset; }
}

.ph-side{
  min-width: 0;
  /* Rail behavior: sticky + scroll within rail instead of pushing page height */
  max-height: calc(100vh - 210px);
  overflow: auto;
  padding-right: 2px;
}
@media (max-width: 1100px){
  .ph-side{
    max-height: unset;
    overflow: visible;
  }
}

.ph-inspector { position: sticky; top: 0; height: 100vh; overflow-y: auto; }

.ph-grid { border: 1px solid rgba(0,0,0,0.12); border-radius: 16px; overflow: hidden; }
.ph-grid-head { display: grid; grid-template-columns: 220px repeat(4, minmax(120px, 1fr)); background: rgba(255,255,255,0.8); border-bottom: 1px solid rgba(0,0,0,0.08); }
.ph-grid-corner { padding: 10px; }
.ph-grid-colhead { padding: 10px; font-weight: 600; text-align: center; }

.ph-grid-body { display: flex; flex-direction: column; }
.ph-grid-row { display: grid; grid-template-columns: 220px repeat(4, minmax(120px, 1fr)); border-bottom: 1px solid rgba(0,0,0,0.06); }
.ph-grid-row:last-child { border-bottom: none; }
.ph-grid-rowhead { padding: 10px; font-weight: 500; background: rgba(255,255,255,0.55); max-width: 220px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.ph-grid-row.is-unplaced .ph-grid-rowhead { font-style: italic; }

.ph-cell { position: relative; min-height: 74px; }

.ph-holes { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }

/* Hole as cutout */
.ph-hole {
  width: 22px; height: 22px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.18);
  background: rgba(0,0,0,0.08);
  box-shadow:
    inset 0 3px 8px rgba(0,0,0,0.35),
    inset 0 -2px 6px rgba(255,255,255,0.25);
}
.ph-hole.is-selected { outline: 2px solid rgba(0,0,0,0.6); outline-offset: 2px; }

.ph-overflow {
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px dashed rgba(0,0,0,0.25);
  background: rgba(255,255,255,0.6);
}

.ph-truth-strip {
  position: absolute;
  left: 10px; right: 10px; bottom: 8px;
  display: flex; gap: 6px; align-items: center;
  font-size: 12px;
  opacity: 0.9;
}
.ph-count { font-variant-numeric: tabular-nums; font-weight: 600; }

.ph-dot { opacity: 0.7; }

/* Severity classes (categorical tokens only; text remains explicit) */
.sev-unknown { transform: scale(1.0); }
.sev-low { transform: scale(1.0); }
.sev-medium { transform: scale(1.15); }
.sev-high { transform: scale(1.3); }
.sev-critical { transform: scale(1.45); }
.sev-mixed { transform: scale(1.2); }

.ph-panel{
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 18px;
  padding: 14px;
  background: rgba(0,0,0,0.28);
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  backdrop-filter: blur(10px);
}

.ph-panel-title { font-weight: 700; margin-bottom: 10px; }
.ph-panel-subtitle { font-weight: 600; margin-top: 12px; margin-bottom: 6px; }
.ph-panel-muted { opacity: 0.7; }

.ph-kv { display: grid; grid-template-columns: 140px 1fr; gap: 6px 10px; }
.ph-k { opacity: 0.75; font-size: 12px; }
.ph-v { font-size: 13px; }
.ph-mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

.ph-json { margin: 0; padding: 10px; border-radius: 12px; background: rgba(0,0,0,0.06); overflow: auto; max-height: 360px; }

.ph-truth { display: flex; flex-direction: column; gap: 12px; }
.ph-truth-head { font-weight: 700; margin-bottom: 6px; }
.ph-truth-list { display: flex; flex-direction: column; gap: 6px; }
.ph-truth-row {
  display: grid;
  grid-template-columns: 90px 140px 1fr 160px 1fr;
  gap: 10px;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.10);
  background: rgba(255,255,255,0.70);
  text-align: left;
}
.ph-muted { opacity: 0.75; }
.ph-modal { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 50; }
.ph-modal-backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,0.72);
  border:none;
}

.ph-modal-body{
  position:relative;
  width: min(980px, 94vw);
  max-height: 86vh;
  overflow: auto;
  border-radius: 20px;
  padding: 16px;
  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 18px 55px rgba(0,0,0,0.55);
  backdrop-filter: blur(14px);
}

.ph-modal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
.ph-modal-title { font-weight: 700; }
.ph-modal-section { margin-top: 12px; }

/* Causality Drilldown — Canonical Inspector */
.ph-inspector {
  background: rgba(12,14,18,0.94);
  border-left: 1px solid rgba(255,255,255,0.08);
}

.ph-drilldown { padding: 16px; font-size: 12px; color: rgba(255,255,255,0.92); }
.ph-drilldown-title { font-weight: 600; letter-spacing: 0.04em; margin-bottom: 10px; }
.ph-drilldown-section { margin-top: 14px; }
.ph-drilldown-label { opacity: 0.6; margin-bottom: 6px; }
.ph-drilldown-kv { margin-top: 6px; display: grid; grid-template-columns: 120px 1fr; gap: 6px; }
.ph-drilldown-mono { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 11px; }
.ph-lineage-row { margin-top: 8px; }
.ph-lineage-row summary { display: grid; grid-template-columns: 1fr 1fr auto; gap: 8px; cursor: pointer; }
.ph-drilldown-json { background: #0a0d12; padding: 8px; border-radius: 6px; overflow-x: auto; }
.ph-drilldown-empty { opacity: 0.5; padding: 10px 0; }

/* -------------------------------
   Instrument Collapse Layer
-------------------------------- */

.ph-instrument {
  display: grid;
  grid-template-rows: auto 1fr;
  grid-template-columns: 1fr;
  gap: 14px;
}

/* Horizon becomes the only resting truth panel */
.ph-horizon-anchor {
  position: sticky;
  top: 0;
  z-index: 5;
}

/* All other panels are latent by default */
.ph-latent {
  display: none;
}

/* Summoned truth panels */
.ph-summoned {
  display: block;
  position: fixed;
  right: 18px;
  top: 84px;
  width: 360px;
  height: calc(100vh - 120px);
  background: rgba(12,14,18,0.96);
  border-left: 1px solid rgba(255,255,255,0.1);
  box-shadow: -10px 0 40px rgba(0,0,0,0.4);
  z-index: 20;
  overflow-y: auto;
  animation: phSummonIn 220ms ease-out;
}

@keyframes phSummonIn {
  from { transform: translateX(40px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

/* Promotion I-C — Summon control + true gravity */
.ph-summon-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(12,14,18,0.65);
  color: rgba(255,255,255,0.88);
  font-size: 12px;
  cursor: pointer;
}

.ph-summon-btn:hover {
  background: rgba(12,14,18,0.78);
}

/* Default: remove clutter until summoned */
.ph-unmapped { display: none; }

/* When inspector is open, allow unmapped to appear (only if wrapped) */
.ph-instrument[data-inspector="open"] .ph-unmapped { display: block; }

/* ---------------------------------------------------------
   Promotion M — Instrument Material Pass
   (visual only; no semantics)
--------------------------------------------------------- */

/* Reduce overall “dashboard slab” feel */
.ph-instrument {
  max-width: 1180px;
  margin: 0 auto;
  padding: 18px 18px 40px;
}

/* Make the drift plane the dominant visual object */
.ph-drift-plane,
.ph-drift,
.ph-capability-drift,
.ph-map {
  border-radius: 18px !important;
}

/* If the map has its own wrapper, soften it */
.ph-drift-plane,
.ph-map,
.ph-capability-drift {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 18px 60px rgba(0,0,0,0.35);
}

/* Horizon: turn into a depth-band rail */
.ph-horizon-anchor {
  position: sticky;
  top: 10px;
  z-index: 8;
  display: flex;
  justify-content: flex-end;
  pointer-events: none; /* rail is contextual; buttons inside can re-enable */
}

/* Target HorizonTimeline outer card if it is a direct child */
.ph-horizon-anchor > * {
  pointer-events: auto;
  width: 380px;
  border-radius: 18px;
  background: rgba(18,20,26,0.72);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 14px 50px rgba(0,0,0,0.35);
  backdrop-filter: blur(10px);
}

/* Make internal horizon cards feel like bands, not tiles */
.ph-horizon-anchor .card,
.ph-horizon-anchor [class*="card"],
.ph-horizon-anchor .panel,
.ph-horizon-anchor [class*="panel"] {
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* Reduce “gray slab” problem */
.ph-horizon-anchor h2,
.ph-horizon-anchor h3,
.ph-horizon-anchor .title {
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-size: 12px;
  opacity: 0.86;
}

/* Chips/legend should be subtle marks */
.ph-chip,
.ph-pill,
.ph-badge,
.ph-legend-chip {
  background: rgba(255,255,255,0.04) !important;
  border: 1px solid rgba(255,255,255,0.10) !important;
  border-radius: 999px !important;
}

/* Summoned inspector should feel like an instrument drawer, not a wall */
.ph-summoned {
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(10,12,16,0.86);
  backdrop-filter: blur(14px);
}

/* Summon button: make it quiet */
.ph-summon-btn {
  border-radius: 999px;
  padding: 9px 14px;
}

/* Kill overbearing section slabs if present */
.ph-section,
.ph-panel,
.ph-card {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px;
}

/* Default text tone: reduce “white on black glare” */
.ph-instrument,
.ph-instrument * {
  color: rgba(255,255,255,0.86);
}

/* ---------------------------------------------------------
   Promotion — Instrument Plane P1
--------------------------------------------------------- */

.ph-root {
  --ph-header-h: var(--app-header-h, 72px);
}

.ph-instrument-shell {
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: calc(100vh - var(--ph-header-h));
}

.ph-instrument-plane {
  position: relative;
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.ph-instrument-plane .ph-map-v1 {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.ph-plane-overlay {
  position: absolute;
  top: 12px;
  left: 12px;
  right: 12px;
  z-index: 6;
  display: flex;
  flex-direction: column;
  gap: 8px;
  pointer-events: none;
}

.ph-plane-overlay > * {
  pointer-events: auto;
}

.ph-instrument-rail {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid rgba(255,255,255,0.08);
}

.ph-instrument-rail .ph-panel {
  background: transparent;
  border: 0;
  box-shadow: none;
  padding: 0;
}

.ph-instrument-rail .ph-panel-title {
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  opacity: 0.7;
}

.ph-instrument-rail .ph-panel-muted {
  opacity: 0.6;
}

/* ---------------------------------------------------------
   Promotion J — Structural Plane Enlargement
--------------------------------------------------------- */

/* Make the instrument layout a wide field */
.ph-instrument {
  max-width: 1440px;
}

/* Drift plane becomes the world */
.ph-drift-plane,
.ph-drift,
.ph-capability-drift,
.ph-map {
  min-height: 64vh;
  margin-top: 20px;
}

/* Demote headers / legends */
.ph-header,
.ph-legend,
.ph-chip,
.ph-pill {
  opacity: 0.78;
}

/* Pull horizon rail upward and narrow */
.ph-horizon-anchor > * {
  width: 300px;
}

/* Reduce vertical noise above plane */
.ph-instrument h1,
.ph-instrument h2 {
  margin-bottom: 8px;
}

/* ---------------------------------------------------------
   Promotion P1 — Layout Contract: 2-Column + Rail
--------------------------------------------------------- */

.ph-root {
  --ph-header-h: var(--app-header-h, 72px);
  max-width: none;
  width: 100%;
}

.ph-body {
  display: grid;
  grid-template-columns: minmax(640px, 1fr) 380px;
  gap: 18px;
  align-items: start;
  min-height: calc(100vh - var(--ph-header-h));
}

@media (max-width: 1100px) {
  .ph-body {
    grid-template-columns: 1fr;
    min-height: unset;
  }
}

.ph-main {
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.ph-structural-plane {
  position: relative;
  flex: 1;
  min-height: calc(100vh - var(--ph-header-h));
  border: 0;
  border-radius: 0;
  background: transparent;
  overflow: visible;
}

.ph-structural-plane .ph-map-v1 {
  flex: 1;
  min-height: 100%;
}

.ph-side {
  min-width: 0;
  position: sticky;
  top: var(--ph-header-h);
  max-height: calc(100vh - var(--ph-header-h));
  overflow-y: auto;
  padding-bottom: 12px;
}

@media (max-width: 1100px) {
  .ph-side {
    position: static;
    max-height: unset;
    overflow: visible;
  }
}

.ph-horizon-anchor {
  position: static;
  top: auto;
}

.ph-inspector-rail {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
}

.ph-unmapped {
  display: block;
}

/* ph-map-v1 styles */
.ph-map-v1 { display: flex; flex-direction: column; gap: 12px; position: relative; }
.ph-map-v1-header { display: flex; align-items: flex-end; justify-content: space-between; gap: 12px; }
.ph-map-v1-legend { display: flex; gap: 10px; flex-wrap: wrap; }
.ph-legend-chip { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 999px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.08); font-size: 12px; }

.ph-map-root {
  position: absolute;
  inset: 0;
}

.ph-map-plane {
  position: absolute;
  inset: 0;
}

/* Single coordinate system */
.ph-radial-viewport {
  position: absolute;
  inset: 0;
  overflow: visible;
  pointer-events: auto;
  perspective: 1600px;
}

.ph-radial-viewport::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 55%;
  width: 70%;
  height: 45%;
  transform: translate(-50%, -50%) scaleY(0.6);
  background: radial-gradient(ellipse at center, rgba(0,0,0,0.45), transparent 70%);
  filter: blur(18px);
  opacity: 0.6;
  pointer-events: none;
}

.ph-disc-stage {
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--ph-disc-size);
  height: var(--ph-disc-size);
  transform: translate(var(--ph-disc-translate-x), var(--ph-disc-translate-y));
  transform-style: preserve-3d;
  pointer-events: none;
  z-index: 1;
}


.ph-disc-tilt {
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transform: rotateX(58deg) rotateZ(calc(-12deg + var(--ph-disc-spin, 0deg))) scale(1.10);
  transform-origin: center center;
  pointer-events: auto;
  z-index: 1;

  position: relative; /* R3.5 body layers anchor */
}

.ph-disc-tilt svg {
  width: 100%;
  height: 100%;
  display: block;
  overflow: visible;
}

.ph-active-sector-wash {
  opacity: 0.30;
  transition: opacity 180ms ease;
}

@keyframes ph-ray-enter {
  from { opacity: 0; }
  to { opacity: 0.30; }
}

.ph-active-sector-wash.ph-ray-enter {
  animation: ph-ray-enter 280ms ease-out;
}

.ph-disc-root {
  transform: none;
}

.ph-node-cell {
  position: relative;
  border-radius: 16px;
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.08);
  overflow: hidden;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.ph-node-cell.is-selected-cell {
  border-color: rgba(255,255,255,0.22);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.12) inset;
}

.ph-node-cell-header { display: flex; align-items: baseline; justify-content: space-between; gap: 10px; }

/* ---------------------------------------------------------
   R3.2 — Field Sovereignty Inversion
--------------------------------------------------------- */

/* Ensure the field itself occupies real page height so scrolling feels normal */
.ph-field {
  position: relative;
  width: 100%;
  min-height: calc(100vh - var(--ph-header-h));
  padding-top: var(--ph-header-h);
  overflow: hidden;
  /* Restore prior baseline: larger disc + lifted translate so the instrument is in-frame at rest */
  --ph-disc-size: 95vmin;
  --ph-disc-translate-x: -55%;
  --ph-disc-translate-y: -58%;
  --ph-under-nav-tuck: 72px;
  --ph-radial-left: 0px;
  --ph-disc-nudge-x: -70px;
  --ph-disc-nudge-y: -90px;
}

/* The plane should start just under the app header */
.ph-field-plane {
  position: fixed;
  top: var(--ph-header-h);
  left: var(--ph-radial-left);
  right: 0;
  bottom: 0;
  z-index: 0;
  pointer-events: auto;
  isolation: isolate;
}

/* Docks float above the plane */
.ph-dock {
  position: absolute;
  left: 24px;
  top: 96px;
  z-index: 20;
  pointer-events: none;
}

.ph-overlay-anchor {
  position: relative;
  z-index: 10;
  width: 100%;
  height: 100%;
}

.ph-root {
  overflow: visible;
}

/* Z strata */
.ph-field-plane { z-index: 0; }
.ph-disc-stage { z-index: 1; }
.ph-disc-tilt { z-index: 1; }
.ph-map-overlay {
  position: absolute;
  inset: 0;
  z-index: 5;
  pointer-events: none;
}
.ph-map-overlay > * { pointer-events: auto; }

.ph-dock-top {
  position: fixed;
  top: calc(var(--ph-header-h) + 14px);
  left: calc(var(--ph-radial-left) + var(--ph-nav-w) + var(--ph-gutter));
  right: 24px;
}

.ph-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  pointer-events: auto;
}

/* Left control stack docks onto the field */
.ph-dock-left {
  position: fixed;
  top: calc(var(--ph-header-h, 72px) + 524px);
  left: calc(var(--ph-radial-left, 0px) + var(--ph-nav-w) + var(--ph-gutter) - var(--ph-under-nav-tuck, 0px) - 125px);
  width: 360px;
  max-width: 420px;
}

.ph-left-stack {
  display: flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: auto;
}

.ph-left-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.ph-left-subtitle {
  font-size: 14px;
  font-weight: 600;
  opacity: 0.9;
}

/* Right horizon rail docks */
.ph-dock-right {
  top: calc(var(--ph-header-h) + 84px);
  right: 24px;
  width: 360px;
  max-width: calc(100vw - 48px);
}

.ph-rail-card {
  pointer-events: auto;
}

/* Inspector: bottom-left, under controls (keeps right rail clean) */
.ph-dock-inspector {
  left: 24px;
  bottom: 24px;
  width: 360px;
  max-width: calc(100vw - 48px);
}

.ph-inspector-card {
  pointer-events: auto;
}

/* Shared glass language for docked UI */
.ph-glass {
  background: rgba(0,0,0,0.34);
  border: 1px solid rgba(255,255,255,0.10);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.35);
  padding: 12px;
}

/* Hole dots rendered on the disc surface */
.ph-hole-dot{
  position: absolute;
  top: 50%;
  left: 50%;
  width: 10px;
  height: 10px;
  margin-left: -5px;
  margin-top: -5px;
  border-radius: 999px;
  background: currentColor;
  color: rgba(255,70,70,0.95);
  box-shadow: 0 0 0 2px rgba(0,0,0,0.35), 0 0 18px rgba(255,70,70,0.35);
}

.ph-disc-hole-layer{
  pointer-events: none;
}

.ph-disc-hole-dot{
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: 2px solid rgba(255, 60, 60, 0.95);
  box-shadow: 0 0 16px rgba(255, 60, 60, 0.45);
  opacity: 0.95;
}

/* ---------------------------------------------------------
   R4.1 — Instrument Sovereignty: No Slab/Card Ecology In Field
   Rule:
   - The field plane is an instrument surface, not a dashboard.
   - Slab UI (cards/panels/grids) may exist ONLY inside docks.
--------------------------------------------------------- */

/* Hard ban any slab/card constructs from rendering inside the field plane. */
.ph-field-plane .ph-panel,
.ph-field-plane .ph-card,
.ph-field-plane .ph-section,
.ph-field-plane .ph-grid,
.ph-field-plane .ph-depth-grid,
.ph-field-plane .ph-depth-card,
.ph-field-plane .ph-void-token-grid,
.ph-field-plane .ph-void-token,
.ph-field-plane .ph-truth,
.ph-field-plane .ph-truth-row,
.ph-field-plane .ph-unmapped,
.ph-field-plane .ph-unmapped-row {
  display: none !important;
}

/* Explicit allow-list: slab/card constructs are permitted inside docks only. */
.ph-dock .ph-panel,
.ph-dock .ph-card,
.ph-dock .ph-section,
.ph-dock .ph-grid,
.ph-dock .ph-depth-grid,
.ph-dock .ph-void-token-grid,
.ph-dock .ph-truth,
.ph-dock .ph-unmapped {
  display: block !important;
}

/* Preserve intended internal layouts when allowed in docks. */
.ph-dock .ph-depth-grid { display: grid !important; }
.ph-dock .ph-truth-row { display: grid !important; }
.ph-dock .ph-depth-card,
.ph-dock .ph-void-token,
.ph-dock .ph-unmapped-row { display: flex !important; }

/* Smaller pills reuse the same glass tone but tighter */
.ph-error-pill,
.ph-hover-pill,
.ph-toggle-pill {
  padding: 10px 12px;
  border-radius: 999px;
}

.ph-toggle-pill {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: rgba(255,255,255,0.82);
}

.ph-toggle-pill input {
  accent-color: rgba(255,255,255,0.85);
}

/* Mobile: collapse right rail beneath topbar */
@media (max-width: 980px) {
  .ph-dock-right {
    top: calc(var(--ph-header-h) + 240px);
    right: 24px;
    left: 24px;
    width: auto;
  }
  .ph-dock-left {
    width: auto;
    right: 24px;
  }
  .ph-dock-inspector {
    left: 24px;
    right: 24px;
    width: auto;
  }
}

@media (max-width: 1100px) {
  .ph-field {
    --ph-disc-nudge-x: -40px;
    --ph-disc-nudge-y: -60px;
  }
}

.ph-stamp {
  position: absolute;
  left: 16px;
  bottom: 16px;
  pointer-events: auto;
  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  padding: 8px 10px;
  font-size: 12px;
  font-weight: 600;
  color: rgba(255,255,255,0.78);
}

.ph-legend {
  position: absolute;
  right: 16px;
  top: 16px;
  pointer-events: auto;
  display: flex;
  gap: 8px;
}
.ph-node-name { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.ph-node-code { font-size: 11px; opacity: 0.8; }

/* a darker “below space” layer for holes to reveal */
.ph-node-void-layer {
  position: absolute;
  inset: 0;
  background: radial-gradient(120px 90px at 50% 60%, rgba(0,0,0,0.65), rgba(0,0,0,0.15));
  opacity: 0.55;
  pointer-events: none;
}

/* holes layer */
.ph-node-holes { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; z-index: 1; }
.ph-node-empty { opacity: 0.5; font-size: 12px; }
.ph-node-more { font-size: 11px; opacity: 0.7; padding: 2px 6px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.04); }

.ph-hole-v1 {
  position: relative;
  border: 0;
  padding: 0;
  border-radius: 999px;
  background: transparent;
  cursor: pointer;
}

.ph-hole-void {
  display: block;
  border-radius: 999px;
  background: radial-gradient(circle at 35% 30%, rgba(0,0,0,0.95), rgba(0,0,0,0.75) 55%, rgba(0,0,0,0.55));
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.08) inset,
    0 10px 24px rgba(0,0,0,0.45);
}

/* sizes */
.ph-hole-v1.size-sm .ph-hole-void { width: 18px; height: 18px; }
.ph-hole-v1.size-md .ph-hole-void { width: 26px; height: 26px; }
.ph-hole-v1.size-lg .ph-hole-void { width: 36px; height: 36px; }
.ph-hole-v1.size-xl .ph-hole-void { width: 48px; height: 48px; }

/* severity ring (visual encoding only) */
.ph-hole-v1.sev-critical .ph-hole-void { box-shadow: 0 0 0 2px rgba(255,255,255,0.16) inset, 0 0 0 2px rgba(255,80,80,0.35); }
.ph-hole-v1.sev-high .ph-hole-void { box-shadow: 0 0 0 2px rgba(255,255,255,0.14) inset, 0 0 0 2px rgba(255,160,60,0.30); }
.ph-hole-v1.sev-medium .ph-hole-void { box-shadow: 0 0 0 2px rgba(255,255,255,0.12) inset, 0 0 0 2px rgba(255,210,80,0.24); }
.ph-hole-v1.sev-low .ph-hole-void { box-shadow: 0 0 0 2px rgba(255,255,255,0.10) inset, 0 0 0 2px rgba(120,200,255,0.20); }
.ph-hole-v1.sev-unknown .ph-hole-void { box-shadow: 0 0 0 2px rgba(255,255,255,0.10) inset; }

.ph-hole-v1.is-selected .ph-hole-void {
  box-shadow:
    0 0 0 2px rgba(255,255,255,0.20) inset,
    0 0 0 3px rgba(255,255,255,0.22);
}

.ph-hole-v1.is-highlighted .ph-hole-void {
  box-shadow:
    0 0 0 2px rgba(255,255,255,0.14) inset,
    0 0 0 2px rgba(140,200,255,0.30);
}

/* unmapped list */
.ph-unmapped { margin-top: 10px; padding: 12px; border-radius: 16px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.07); }
.ph-unmapped-list { display: flex; flex-direction: column; gap: 8px; margin-top: 10px; }
.ph-unmapped-row {
  display: flex;
  align-items: center;
  gap: 10px;
  border-radius: 12px;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.20);
  cursor: pointer;
}
.ph-unmapped-row.is-selected { border-color: rgba(255,255,255,0.22); }
.ph-unmapped-row.is-highlighted { border-color: rgba(140,200,255,0.25); }
.ph-unmapped-main { display: inline-flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.ph-unmapped-type { font-weight: 600; font-size: 12px; }
.ph-unmapped-key { opacity: 0.85; font-size: 12px; }

/* severity dots (shared) */
.ph-sev-dot { width: 10px; height: 10px; border-radius: 999px; display: inline-block; opacity: 0.95; }
.ph-sev-dot.critical { background: rgba(255,80,80,0.85); }
.ph-sev-dot.high { background: rgba(255,160,60,0.80); }
.ph-sev-dot.medium { background: rgba(255,210,80,0.75); }
.ph-sev-dot.low { background: rgba(120,200,255,0.70); }
.ph-sev-dot.unknown { background: rgba(200,200,200,0.55); }

/* ph-inspector styles */
.ph-inspector {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px;
  border-radius: 18px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.07);
}

.ph-inspector-title { font-size: 14px; font-weight: 700; letter-spacing: 0.2px; }
.ph-inspector-section {
  padding: 12px;
  border-radius: 16px;
  background: rgba(0,0,0,0.18);
  border: 1px solid rgba(255,255,255,0.07);
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.ph-section-title { font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; opacity: 0.9; }

.ph-empty { padding: 10px 12px; border-radius: 12px; background: rgba(255,255,255,0.03); border: 1px dashed rgba(255,255,255,0.10); opacity: 0.9; }

.ph-filter-row { display: flex; flex-direction: column; gap: 8px; }
.ph-filter-label { font-size: 11px; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.08em; }
.ph-chip-row { display: flex; flex-wrap: wrap; gap: 8px; }

.ph-chip {
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  cursor: pointer;
}
.ph-chip.is-active {
  border-color: rgba(255,255,255,0.22);
  background: rgba(255,255,255,0.08);
}

.ph-input {
  width: 100%;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.25);
  padding: 10px 12px;
  outline: none;
  color: inherit;
}

.ph-absence-list-v2 { display: flex; flex-direction: column; gap: 8px; }
.ph-absence-row-v2 {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.18);
  cursor: pointer;
}
.ph-absence-row-v2.is-active { border-color: rgba(255,255,255,0.22); background: rgba(255,255,255,0.05); }
.ph-absence-col { display: flex; flex-direction: column; gap: 6px; flex: 1; min-width: 0; }
.ph-absence-col-right { display: flex; flex-direction: column; gap: 6px; align-items: flex-end; }
.ph-absence-line1 { display: inline-flex; gap: 10px; align-items: center; flex-wrap: wrap; }
.ph-absence-line2 { opacity: 0.9; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 220px; }
.ph-absence-mini { font-size: 11px; opacity: 0.75; }

.ph-preview-list { display: flex; flex-direction: column; gap: 10px; }
.ph-preview-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
}
.ph-preview-label { font-weight: 600; font-size: 12px; }
.ph-preview-meta { font-size: 11px; opacity: 0.75; display: inline-flex; gap: 8px; align-items: center; }
.ph-preview-left { display: flex; flex-direction: column; gap: 6px; min-width: 0; }

/* button variants (lightweight) */
.ph-btn.ph-btn-ghost {
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.03);
}

/* ph-selection-pill styles */
.ph-selection-pill {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  border-radius: 18px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  margin-bottom: 12px;
}

.ph-selection-pill.is-empty { opacity: 0.85; }

.ph-selection-left { display: flex; flex-direction: column; gap: 6px; min-width: 0; }
.ph-selection-title { font-size: 12px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.08em; opacity: 0.9; }

.ph-selection-body {
  display: inline-flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
  min-width: 0;
}

.ph-selection-type { font-weight: 700; font-size: 12px; opacity: 0.95; }
.ph-selection-key { font-size: 12px; opacity: 0.9; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 360px; }

.ph-selection-meta { font-size: 11px; opacity: 0.75; display: inline-flex; gap: 6px; align-items: center; }

.ph-selection-actions { display: inline-flex; gap: 8px; flex-wrap: wrap; justify-content: flex-end; }

/* ph-structural-plane styles */
.ph-node-plate.is-focused {
  border-color: rgba(255,255,255,0.22);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.12) inset, 0 12px 30px rgba(0,0,0,0.35);
}

/* plates should read like rigid structural segments */
.ph-node-plate {
  background:
    radial-gradient(180px 120px at 20% 0%, rgba(255,255,255,0.08), transparent 55%),
    radial-gradient(220px 140px at 90% 45%, rgba(255,255,255,0.06), transparent 60%),
    rgba(0,0,0,0.24);
  border: 1px solid rgba(255,255,255,0.08);
}

/* holes: true perforations with rim + inner void + “below space” */
.ph-hole-v2 {
  position: relative;
  border: 0;
  padding: 0;
  background: transparent;
  cursor: pointer;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* deterministic offsets for up to 4 holes */
.ph-hole-pos-0 { transform: translate(0px, 0px); }
.ph-hole-pos-1 { transform: translate(6px, 4px); }
.ph-hole-pos-2 { transform: translate(-4px, 6px); }
.ph-hole-pos-3 { transform: translate(8px, -2px); }

.ph-hole-rim,
.ph-hole-void,
.ph-hole-below {
  position: absolute;
  border-radius: 999px;
}

/* size mapping */
.ph-hole-v2.size-sm { width: 18px; height: 18px; }
.ph-hole-v2.size-md { width: 26px; height: 26px; }
.ph-hole-v2.size-lg { width: 36px; height: 36px; }
.ph-hole-v2.size-xl { width: 48px; height: 48px; }

.ph-hole-rim {
  inset: -2px;
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,0.22), rgba(255,255,255,0.08) 55%, rgba(0,0,0,0.05));
  filter: blur(0.1px);
  opacity: 0.85;
}

/* void mouth */
.ph-hole-void {
  inset: 0px;
  background:
    radial-gradient(circle at 35% 30%, rgba(0,0,0,0.98), rgba(0,0,0,0.78) 60%, rgba(0,0,0,0.60));
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.08) inset,
    0 10px 22px rgba(0,0,0,0.45);
}

/* below-space reveal (depth varies by horizon) */
.ph-hole-below {
  inset: 2px;
  background:
    radial-gradient(circle at 50% 60%, rgba(0,0,0,0.90), rgba(0,0,0,0.20));
  opacity: 0.0;
}

/* horizon depth encoding (H0 shallow -> H3 through-plane) */
.ph-hole-v2.hdepth-h0 .ph-hole-below { opacity: 0.10; transform: translateY(2px); filter: blur(0.2px); }
.ph-hole-v2.hdepth-h1 .ph-hole-below { opacity: 0.18; transform: translateY(5px); filter: blur(0.35px); }
.ph-hole-v2.hdepth-h2 .ph-hole-below { opacity: 0.26; transform: translateY(9px); filter: blur(0.55px); }
.ph-hole-v2.hdepth-h3 .ph-hole-below { opacity: 0.34; transform: translateY(13px); filter: blur(0.75px); }

/* severity ring (visual encoding only) */
.ph-hole-v2.sev-critical .ph-hole-rim { box-shadow: 0 0 0 2px rgba(255,80,80,0.35); }
.ph-hole-v2.sev-high .ph-hole-rim { box-shadow: 0 0 0 2px rgba(255,160,60,0.30); }
.ph-hole-v2.sev-medium .ph-hole-rim { box-shadow: 0 0 0 2px rgba(255,210,80,0.24); }
.ph-hole-v2.sev-low .ph-hole-rim { box-shadow: 0 0 0 2px rgba(120,200,255,0.20); }
.ph-hole-v2.sev-unknown .ph-hole-rim { box-shadow: 0 0 0 2px rgba(200,200,200,0.14); }

/* selection focus */
.ph-hole-v2.is-selected .ph-hole-rim { box-shadow: 0 0 0 3px rgba(255,255,255,0.22); }
.ph-hole-v2.is-highlighted .ph-hole-rim { box-shadow: 0 0 0 2px rgba(140,200,255,0.28); }


/* ph-horizon-depth styles */
.ph-depth-timeline { display: flex; flex-direction: column; gap: 10px; }

.ph-depth-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(220px, 1fr));
  gap: 10px;
}

.ph-depth-card {
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.18);
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.ph-depth-card::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.7;
}

.ph-depth-h0::before { background: radial-gradient(520px 220px at 30% 10%, rgba(255,255,255,0.08), transparent 60%); }
.ph-depth-h1::before { background: radial-gradient(520px 220px at 30% 10%, rgba(255,255,255,0.10), transparent 60%); }
.ph-depth-h2::before { background: radial-gradient(520px 220px at 30% 10%, rgba(255,255,255,0.12), transparent 60%); }
.ph-depth-h3::before { background: radial-gradient(520px 220px at 30% 10%, rgba(255,255,255,0.14), transparent 60%); }

.ph-depth-card.is-active {
  border-color: rgba(255,255,255,0.22);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.12) inset;
}

.ph-depth-card-top { display: flex; flex-direction: column; gap: 6px; z-index: 1; }
.ph-depth-label { font-weight: 900; letter-spacing: 0.08em; text-transform: uppercase; }
.ph-depth-sub { opacity: 0.8; font-size: 12px; }
.ph-depth-card-body { display: flex; flex-direction: column; gap: 6px; z-index: 1; }
.ph-depth-meta { font-size: 11px; opacity: 0.75; }
.ph-depth-empty { font-size: 12px; opacity: 0.8; line-height: 1.35; }

.ph-depth-card-actions { display: inline-flex; gap: 8px; z-index: 1; }

/* void tokens for unmapped absences (depth + severity, selectable) */
.ph-void-token-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
  margin-top: 10px;
}

.ph-void-token {
  position: relative;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.18);
  padding: 14px;
  cursor: pointer;
  overflow: hidden;
  min-height: 62px;
  text-align: left;
}

.ph-void-token.is-selected { border-color: rgba(255,255,255,0.22); background: rgba(255,255,255,0.05); }

.ph-void-token .ph-hole-rim,
.ph-void-token .ph-hole-void,
.ph-void-token .ph-hole-below {
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
}

.ph-void-token.size-sm .ph-hole-rim,
.ph-void-token.size-sm .ph-hole-void,
.ph-void-token.size-sm .ph-hole-below { width: 18px; height: 18px; }

.ph-void-token.size-md .ph-hole-rim,
.ph-void-token.size-md .ph-hole-void,
.ph-void-token.size-md .ph-hole-below { width: 26px; height: 26px; }

.ph-void-token.size-lg .ph-hole-rim,
.ph-void-token.size-lg .ph-hole-void,
.ph-void-token.size-lg .ph-hole-below { width: 36px; height: 36px; }

.ph-void-token.size-xl .ph-hole-rim,
.ph-void-token.size-xl .ph-hole-void,
.ph-void-token.size-xl .ph-hole-below { width: 48px; height: 48px; }

.ph-void-token-label {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  padding-left: 64px;
  z-index: 1;
  position: relative;
}

.ph-void-token-type { font-weight: 700; font-size: 12px; opacity: 0.95; }
.ph-void-token-key { font-size: 12px; opacity: 0.9; }

/* ph-lineage-overlay styles */
.ph-lineage-overlay {
  position: absolute;
  inset: 0;
  z-index: 2;
  pointer-events: none;
}

.ph-lineage-svg {
  width: 100%;
  height: 100%;
}

.ph-lineage-line {
  stroke: rgba(170, 220, 255, 0.45);
  stroke-width: 2;
  stroke-linecap: round;
  filter: drop-shadow(0 8px 18px rgba(0,0,0,0.45));
  opacity: 0.85;
}


/* ph-structural-scar styles */

/* Optional: deepen the dimming when something is selected (gravity) */
.ph-node-plate.is-dimmed {
  opacity: 0.42;
  filter: saturate(0.72) contrast(0.92) blur(0.1px);
}

.ph-node-plate.is-focused {
  position: relative;
}

.ph-node-plate.is-focused::after {
  content: "";
  position: absolute;
  inset: -6px;
  border-radius: 20px;
  pointer-events: none;
  background: radial-gradient(420px 220px at 50% 30%, rgba(255,255,255,0.10), transparent 65%);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.14) inset;
  opacity: 0.85;
}

/* Hole “scar”: cracks + deformation halo */
.ph-hole-v2::before {
  content: "";
  position: absolute;
  inset: -14px;
  border-radius: 999px;
  pointer-events: none;
  opacity: 0.0;
  background:
    radial-gradient(circle at 45% 40%, rgba(255,255,255,0.10), transparent 55%),
    radial-gradient(circle at 60% 65%, rgba(0,0,0,0.55), transparent 60%),
    conic-gradient(from 220deg,
      rgba(255,255,255,0.00) 0deg,
      rgba(255,255,255,0.10) 24deg,
      rgba(255,255,255,0.00) 58deg,
      rgba(255,255,255,0.10) 86deg,
      rgba(255,255,255,0.00) 140deg,
      rgba(255,255,255,0.08) 182deg,
      rgba(255,255,255,0.00) 240deg,
      rgba(255,255,255,0.08) 308deg,
      rgba(255,255,255,0.00) 360deg);
  filter: blur(0.4px);
}

.ph-hole-v2.sev-critical::before,
.ph-hole-v2.sev-high::before {
  opacity: 0.65;
}

.ph-hole-v2.sev-medium::before { opacity: 0.42; }
.ph-hole-v2.sev-low::before { opacity: 0.28; }

/* Rim deformation (subtle “torn edge”) */
.ph-hole-v2 .ph-hole-rim {
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,0.22), rgba(255,255,255,0.08) 55%, rgba(0,0,0,0.05)),
    conic-gradient(from 10deg,
      rgba(255,255,255,0.00) 0deg,
      rgba(255,255,255,0.10) 18deg,
      rgba(255,255,255,0.00) 44deg,
      rgba(255,255,255,0.08) 66deg,
      rgba(255,255,255,0.00) 92deg,
      rgba(255,255,255,0.06) 140deg,
      rgba(255,255,255,0.00) 200deg,
      rgba(255,255,255,0.07) 252deg,
      rgba(255,255,255,0.00) 360deg);
  opacity: 0.9;
}

/* Critical/high “breathing” stress pulse (visual only) */
@keyframes phStressPulse {
  0%   { transform: translateY(0px) scale(1.00); opacity: 0.62; }
  50%  { transform: translateY(-1px) scale(1.03); opacity: 0.86; }
  100% { transform: translateY(0px) scale(1.00); opacity: 0.62; }
}

.ph-hole-v2.sev-critical .ph-hole-rim,
.ph-hole-v2.sev-high .ph-hole-rim {
  animation: phStressPulse 2.8s ease-in-out infinite;
}

/* Selected hole gets a “focus scar ring” */
.ph-hole-v2.is-selected::before {
  opacity: 0.85;
  filter: blur(0.25px);
}

.ph-hole-v2.is-selected .ph-hole-rim {
  animation: none;
  box-shadow:
    0 0 0 3px rgba(255,255,255,0.22),
    0 0 40px rgba(255,255,255,0.10);
}

/* Unmapped void tokens: add the same scar language */
.ph-void-token::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(520px 240px at 20% 0%, rgba(255,255,255,0.06), transparent 60%);
  opacity: 0.75;
}

.ph-void-token.sev-critical,
.ph-void-token.sev-high {
  box-shadow: 0 10px 26px rgba(0,0,0,0.28);
}

/* ph-capability-plane-v1 styles */
.ph-node-plate {
  min-height: 110px;
  background:
    radial-gradient(260px 140px at 15% 0%, rgba(255,255,255,0.06), transparent 60%),
    radial-gradient(240px 140px at 85% 60%, rgba(255,255,255,0.05), transparent 65%),
    rgba(0,0,0,0.22);
}

.ph-node-cell-header {
  gap: 8px;
}

.ph-node-name {
  font-weight: 700;
  font-size: 12px;
  opacity: 0.95;
}

.ph-node-code {
  font-size: 11px;
  opacity: 0.65;
}

.ph-node-holes-plane {
  gap: 10px;
  flex-wrap: wrap;
}

.ph-node-radial {
  width: 180px;
  pointer-events: auto;
}

/* ph-alignment-promo-e styles */

/* Timeline cards */
.ph-timeline { margin-bottom: 14px; }

.ph-depth-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(160px, 1fr));
  gap: 10px;
  margin: 10px 0 6px 0;
}

.ph-depth-card {
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.22);
  padding: 12px;
  text-align: left;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.ph-depth-card::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.7;
  background: radial-gradient(520px 220px at 20% 0%, rgba(255,255,255,0.06), transparent 55%);
}

.ph-depth-card.is-active {
  border-color: rgba(255,255,255,0.22);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.10) inset;
}

.ph-depth-top { display: flex; flex-direction: column; gap: 6px; position: relative; z-index: 1; }
.ph-depth-label { font-weight: 900; letter-spacing: 0.08em; text-transform: uppercase; }
.ph-depth-sub { opacity: 0.82; font-size: 12px; }
.ph-depth-body { margin-top: 8px; display: flex; flex-direction: column; gap: 6px; position: relative; z-index: 1; }
.ph-depth-meta { font-size: 11px; opacity: 0.78; }
.ph-depth-empty { font-size: 12px; opacity: 0.82; line-height: 1.35; }

.ph-depth-actions { margin-top: 10px; display: flex; align-items: center; position: relative; z-index: 1; }
.ph-actions { display: inline-flex; gap: 10px; }
.ph-action { display: inline-flex; gap: 8px; align-items: center; opacity: 0.9; }
.ph-action-label { font-size: 11px; opacity: 0.8; }
.ph-btn-mini {
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.90);
}
.ph-btn-mini:disabled { opacity: 0.35; cursor: not-allowed; }

.ph-hole {
  position: relative;
  display: inline-block;
  border: 0;
  cursor: pointer;
  background: transparent;
  border-radius: 999px;
}

/* Size tiers — this is what makes the change immediately visible */
.ph-hole.size-sm { width: 14px; height: 14px; }
.ph-hole.size-md { width: 20px; height: 20px; }
.ph-hole.size-lg { width: 28px; height: 28px; }
.ph-hole.size-xl { width: 38px; height: 38px; }

/* Rim + void + below-space illusion via layered gradients */
.ph-hole::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.18), rgba(255,255,255,0.06) 55%, rgba(0,0,0,0.0) 70%),
    radial-gradient(circle at 55% 60%, rgba(0,0,0,0.88), rgba(0,0,0,0.96) 60%, rgba(0,0,0,0.98) 100%);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.45),
    0 0 0 1px rgba(255,255,255,0.10) inset;
  opacity: 0.92;
}

/* Crack halo (severity amplifies) */
.ph-hole::after {
  content: "";
  position: absolute;
  inset: -10px;
  border-radius: 999px;
  pointer-events: none;
  background:
    conic-gradient(from 210deg,
      rgba(255,255,255,0.00) 0deg,
      rgba(255,255,255,0.10) 22deg,
      rgba(255,255,255,0.00) 52deg,
      rgba(255,255,255,0.08) 84deg,
      rgba(255,255,255,0.00) 140deg,
      rgba(255,255,255,0.07) 190deg,
      rgba(255,255,255,0.00) 248deg,
      rgba(255,255,255,0.07) 310deg,
      rgba(255,255,255,0.00) 360deg),
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.08), transparent 62%);
  filter: blur(0.4px);
  opacity: 0.25;
}

.ph-hole.sev-medium::after { opacity: 0.38; }
.ph-hole.sev-high::after { opacity: 0.58; }
.ph-hole.sev-critical::after { opacity: 0.78; }

/* Selection reads like “this is the current rupture” */
.ph-hole.is-selected::before {
  box-shadow:
    0 0 0 3px rgba(255,255,255,0.22),
    0 14px 26px rgba(0,0,0,0.55),
    0 0 60px rgba(255,255,255,0.10);
}

/* Critical/high stress pulse (visual only) */
@keyframes phStressPulse2 {
  0% { transform: scale(1.00); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1.00); }
}

.ph-hole.sev-high::before,
.ph-hole.sev-critical::before {
  animation: phStressPulse2 2.9s ease-in-out infinite;
}

.ph-drift-map{
  display:flex;
  flex-direction: column;
  gap: 10px;
  flex: 1;
  min-height: 520px;
}

.ph-drift-canvas{
  flex: 1;
  min-height: 460px;
}

.ph-horizon{
  display:flex;
  flex-direction: column;
  gap: 10px;
}

.ph-horizon-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.ph-horizon-card{
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 16px;
  padding: 10px;
  background: rgba(0,0,0,0.22);
  box-shadow: 0 8px 24px rgba(0,0,0,0.30);
}
.ph-horizon-card p,
.ph-horizon-card span{
  opacity: 0.85;
}

.ph-horizon-actions{
  display:flex;
  gap: 8px;
  margin-top: 8px;
}
.ph-horizon-actions button{
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.20);
}

/* R3.5 — Disc body layers live beneath SVG + radial nodes */
.ph-disc-tilt svg,
.ph-disc-tilt .ph-radial-layer {
  position: relative;
  z-index: 2;
}

/* R3.5 — Disc body materialization (graphite ice saucer) */
.ph-disc-sidewall {
  position: absolute;
  inset: 0;
  border-radius: 9999px;
  pointer-events: none;
  z-index: 0;

  /* thickness: push body downward in screen space */
  transform: translateY(12px);

  /* quiet dark body material */
  background: radial-gradient(circle at 50% 40%,
    rgba(255,255,255,0.05) 0%,
    rgba(255,255,255,0.02) 22%,
    rgba(0,0,0,0.52) 62%,
    rgba(0,0,0,0.78) 100%
  );

  /* ring mask (thin constant wall) */
  -webkit-mask: radial-gradient(circle,
    transparent 0%,
    transparent 72%,
    #000 75%,
    #000 100%
  );
  mask: radial-gradient(circle,
    transparent 0%,
    transparent 72%,
    #000 75%,
    #000 100%
  );

  filter: blur(0.2px);
  opacity: 0.95;
}

.ph-disc-sidewallCore {
  position: absolute;
  inset: 0;
  border-radius: 9999px;
  pointer-events: none;
  z-index: 0;

  /* “certainty near NOW”: slightly less drop so it reads as inner support */
  transform: translateY(9px);

  /* subtle inner mass (must remain quiet) */
  background: radial-gradient(circle at 50% 42%,
    rgba(255,255,255,0.04) 0%,
    rgba(255,255,255,0.02) 20%,
    rgba(0,0,0,0.34) 58%,
    rgba(0,0,0,0.00) 78%
  );

  /* mask: thicker band near center that fades outward */
  -webkit-mask: radial-gradient(circle,
    transparent 0%,
    transparent 60%,
    #000 66%,
    rgba(0,0,0,0.0) 80%,
    transparent 88%
  );
  mask: radial-gradient(circle,
    transparent 0%,
    transparent 60%,
    #000 66%,
    rgba(0,0,0,0.0) 80%,
    transparent 88%
  );

  opacity: 0.70;
  filter: blur(0.4px);
}

.ph-disc-saucer {
  position: absolute;
  inset: 0;
  border-radius: 9999px;
  pointer-events: none;
  z-index: 1; /* above sidewalls, below svg */

  /* temporal rim falloff (smooth icy saucer) */
  background: radial-gradient(circle at 50% 46%,
    rgba(255,255,255,0.02) 0%,
    rgba(255,255,255,0.01) 42%,
    rgba(220,235,255,0.045) 60%,
    rgba(220,235,255,0.025) 66%,
    rgba(0,0,0,0.14) 72%,
    rgba(0,0,0,0.38) 86%,
    rgba(0,0,0,0.62) 100%
  );

  opacity: 0.95;
}
